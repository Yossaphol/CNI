# IPv6 Explanation & Addressing Guide (Part 5)

เอกสารนี้อธิบาย **แนวคิด IPv6 ทั้งหมดที่ใช้ในแลปนี้**  
เน้นให้เข้าใจว่า **คิดจากโจทย์ยังไง / ทำไมถึงเป็นค่านี้**  
สามารถใช้ท่องก่อนสอบ หรืออธิบายตอนตรวจงานได้ครบทุกจุด

---

## 1. GUA คืออะไร (Global Unicast Address)

**GUA (Global Unicast Address)** คือ IPv6 ที่ใช้แทนอุปกรณ์บนเครือข่ายหลัก  
เทียบเท่า **Public IPv4**

คุณสมบัติ:
- Route ได้
- ไม่ซ้ำกันทั่วโลก
- อยู่ในช่วง `2000::/3`

ในแลปนี้ **อาจารย์กำหนด Prefix มาให้แล้ว**  
ดังนั้นเราไม่ต้องออกแบบเอง

---

## 2. สูตรการสร้าง GUA จากโจทย์

โจทย์กำหนดรูปแบบชัดเจน:

```
2001:6707:รหัสนศสามตัวท้าย:เลข VLAN::Interface ID
```

ของนักศึกษาคนนี้:
- รหัส นศ = **145**
- VLAN A = **153**
- VLAN B = **106**
- VLAN C = **182**

---

## 3. ทำไม Prefix เหมือน แต่ตัวท้ายไม่เหมือน

ตัวอย่าง VLAN A:

```
2001:6707:145:153::/64
```

> **Prefix (/64) เหมือนกัน = อยู่ Subnet เดียวกัน**

สิ่งที่ต่างคือ **Interface ID** (ตัวตนของอุปกรณ์)

| อุปกรณ์ | IPv6 |
|--------|------|
| Router2 (Gateway) | `2001:6707:145:153::1/64` |
| ubuntu1 | `2001:6707:145:153::2/64` |
| Switch | `2001:6707:145:153::3/64` |
| ubuntu2 | SLAAC (สุ่ม) |

---

## 4. Interface ID คืออะไร

Interface ID = ส่วนหลังของ IPv6

โจทย์ **บังคับกำหนดมาให้** ไม่ได้คิดเอง

| อุปกรณ์ | Interface ID |
|--------|--------------|
| Router ทุก interface | `::1` |
| Router2 e0/1 | `::2` |
| ubuntu1 | `::2` |
| Switch | `::3` |
| ubuntu2 | SLAAC |

---

## 5. Link-Local Address คืออะไร

Link-Local ใช้สำหรับ:
- ชี้ Gateway
- Router Advertisement (RA)
- ใช้งานเฉพาะใน LAN

ช่วงมาตรฐาน:
```
FE80::/10
```

---

## 6. ทำไม FE80::1 / ::2 / ::3 ไม่เหมือนกัน

โจทย์กำหนด:
- Router ใช้ Interface ID = 1
- Router2 e0/1 = 2
- อุปกรณ์อื่นไม่ให้ชนกัน

| อุปกรณ์ | Link-Local |
|--------|-----------|
| Router (Gateway) | `FE80::1` |
| ubuntu1 | `FE80::2` |
| Switch | `FE80::3` |

---

## 7. ทำไม Gateway IPv6 เป็น FE80::1

**IPv6 ใช้ Link-Local เป็น Default Gateway**

เหตุผล:
- Router โฆษณาตัวเองด้วย RA
- Host ไม่ต้องรู้ GUA ของ Router
- ปลอดภัยและยืดหยุ่นกว่า IPv4

ดังนั้น Gateway จะเป็น:
```
FE80::1
```

---

## 8. ถ้าไม่ใช่ /64 ต้องคิดยังไง

### หลักสำคัญ
- `/64` = มาตรฐานสำหรับ SLAAC
- ถ้า **ไม่ใช่ /64** ต้องคิดเหมือน IPv4 subnetting

---

### ตัวอย่าง: /60

```
2001:6707:145:153::/60
```

หมายถึง:
- ใช้ 60 บิตเป็น Network
- เหลือ 4 บิตสำหรับ Subnet เพิ่ม (16 subnet)

Subnet จะเพิ่มทีละ:
```
:1530::
:1531::
:1532::
...
```

---

### ตัวอย่าง: /56

- Network 56 บิต
- เหลือ 8 บิต
- ได้ 256 Subnet
- เพิ่มทีละ `:XX::`

---

### ตารางเทียบง่าย

| Prefix | ใช้ทำอะไร |
|------|----------|
| /64 | LAN, SLAAC (นิยมที่สุด) |
| /60 | แบ่ง VLAN หลายวง |
| /56 | แจก subnet ให้ site |
| /48 | องค์กรใหญ่ |

---

## 9. สรุปจำให้ขึ้นใจ

- **Prefix เหมือน = Subnet เดียวกัน**
- **Interface ID = ตัวตนอุปกรณ์**
- **Gateway IPv6 = FE80::1**
- **SLAAC ต้องใช้ /64**
- **Link-Local ไม่ route**

---

เอกสารนี้สามารถใช้:
- อธิบายตอนสอบ
- แนบส่งงาน
- ท่องก่อน Practical

